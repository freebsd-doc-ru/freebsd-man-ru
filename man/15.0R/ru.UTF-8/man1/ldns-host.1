.\" (c) Magerya Vitaly
.\"
.\" Copying and distribution of this file, with or without modification,
.\" are permitted in any medium without royalty provided the copyright
.\" notice and this notice are preserved. This file is offered as-is,
.\" without any warranty.
.\" FRDP path ./contrib/ldns-host/ldns-host.1
.\" FRDP githash 3f68b24e10aeb1a1cd85f2d349da44138d52c501
.\" FRDP hash256 e0c7f654193234e1066cd0a018821fcf8a9910fc8a9e8f7a991d7294306efb2b
.Dd Aug 27, 2012
.Dt LDNS-HOST 1
.Os
.Sh ИМЯ
.Nm ldns-host
.Nd Утилита для DNS-запросов
.Sh СИНТАКСИС
.Nm
.Op Fl aCdilrsTvw46
.Op Fl c Ar класс
.Op Fl N Ar количество_точек
.Op Fl R Ar число
.Op Fl t Ar тип
.Op Fl W Ar ожидание
.Ar имя
.Op Ar сервер
.Sh ОПИСАНИЕ
.Nm
— это простая утилита для выполнения DNS-запросов. Обычно она
используется для преобразования имён в IP-адреса и наоборот.
.Pp
.Ar имя
— это доменное имя, которое нужно найти. Это также может быть
точечно-десятичный IPv4-адрес или разделённый двоеточиями IPv6-адрес,
и в этом случае
.Nm
по умолчанию выполнит обратный поиск для этого адреса.
.Pp
Если
.Ar имя
не указано,
.Nm
выводит краткую сводку по своему использованию.
.Pp
.Ar сервер
— необязательный аргумент, который является либо доменным именем, либо IP-адресом
сервера имён, который
.Nm
должен опрашивать вместо сервера или серверов, перечисленных в
.Pa /etc/resolv.conf .
Если
.Ar сервер
является доменным именем, для получения его адреса используется системный резолвер.
.Pp
Поддерживаемые опции:
.Bl -tag -width indent
.It Fl a
Выполнить подробный запрос типа
.Cm ANY .
Эквивалентно
.Fl v Fl t Cm ANY .
.It Fl C
Запросить записи
.Cm SOA
для зоны
.Ar имя
со всех её авторитетных серверов имён. Список серверов имён
получается через запрос
.Cm NS
для
.Ar имя .
.It Fl c Ar класс
Выполнить DNS-запрос класса
.Ar класс .
Распознаваемые классы:
.Cm IN Pq Internet ,
.Cm CH Pq Chaosnet ,
.Cm HS Pq Hesiod ,
.Cm NONE ,
.Cm ANY
и
.Cm CLASS Ns Ar N 
(где
.Ar N
— число от 1 до 255). По умолчанию
.Cm IN .
.It Fl d
Выводить подробную информацию. Это синоним
.Fl v ,
предоставлен для обратной совместимости.
.It Fl i
Использовать домен IP6.INT для обратных запросов IPv6-адресов (как
определено в RFC1886; обратите внимание, что RFC4159 устаревает IP6.INT).
По умолчанию используется IP6.ARPA.
.It Fl l
Вывести список всех записей
.Cm NS, PTR, A
и
.Cm AAAA
в зоне
.Ar имя
путём выполнения трансфера зоны
.Pq Cm AXFR .
Эту опцию можно комбинировать с
.Fl a ,
чтобы вывести все записи, или с
.Fl t ,
чтобы выводить только определённые.
.It Fl N Ar количество_точек
Считать имена с как минимум таким количеством точек абсолютными. То есть
пытаться разрешать их напрямую перед обращением к опциям
.Ic domain
или
.Ic search
из
.Pa /etc/resolv.conf .
.It Fl r
Выполнить нерекурсивный запрос к серверу имён, очистив бит RD
.Pq Dq recursion desired
в запросе.
.It Fl R Ar число
Повторить запрос такое количество раз, если ответ не получен
вовремя. По умолчанию 1 повтор. Если
.Ar число
отрицательно или равно нулю, используется 1.
.It Fl s
Сообщать о ответах SERVFAIL как есть, не игнорировать их.
.It Fl T
Опрашивать сервер имён по TCP. По умолчанию используется UDP, за исключением
запросов
.Cm AXFR
и
.Cm IXFR ,
которые требуют TCP.
.Nm
также повторит UDP-запросы в режиме TCP, если UDP-ответ был
усечён (т.е. был установлен бит TC).
.It Fl t Ar тип
Выполнить DNS-запрос типа
.Ar тип ,
который может быть любым стандартным именем типа запроса
.Pq Cm A , CNAME , MX , TXT , No и т.д. ,
запросом-шаблоном
.Pq Cm ANY ,
или
.Cm TYPE Ns Ar N ,
где
.Ar N
— число от 1 до 65535. Для запросов
.Cm IXFR Pq инкрементальный трансфер зоны
начальный порядковый номер может быть указан путём добавления
знака равенства и номера
.Pq например, Fl t Cm IXFR Ns =12345678 .
.Pp
По умолчанию запрашиваются записи
.Cm A , AAAA , No и Cm MX ,
если не заданы опции
.Fl C
или
.Fl l
(в этом случае выполняются запросы
.Cm SOA
или
.Cm AXFR )
или если
.Ar имя
является допустимым IP-адресом
(в этом случае выполняется обратный запрос с использованием
запроса
.Cm PTR ).
.It Fl v
Выводить подробную информацию.
.It Fl w
Ждать ответа от сервера имён вечно (или очень долго).
.It Fl W Ar ожидание
Ждать указанное количество секунд ответа от сервера имён до тайм-аута.
Если
.Ar ожидание
отрицательно или равно нулю, используется значение 1. По умолчанию
ожидание составляет 10 секунд для TCP-соединений и 5 секунд для UDP (оба
подвержены повторным попыткам, см. опцию
.Fl R ) .
.It Fl 4
Использовать только транспорт IPv4.
.It Fl 6
Использовать только транспорт IPv6.
.El
.Sh FILES
.Pa /etc/resolv.conf
.Sh СМ. ТАКЖЕ
.Xr drill 1 ,
.Xr resolv.conf 5
.Sh СОВМЕСТИМОСТЬ
.Nm
стремится быть достаточно совместимой с утилитой
.Sq host
из дистрибутива BIND9, как по поддерживаемым опциям, так и
по выводимым данным. Вот список известных значительных отличий:
.Bl -bullet
.It
Опции отладки
.Pq Fl D No и Fl m
не поддерживаются.
.It
Класс запроса
.Cm CLASS0
и тип
.Cm TYPE0
не поддерживаются.
.It
Обратные косые черты в доменных именах обрабатываются особым образом.
.It
Поддерживается максимум 255 повторных попыток (опция
.Fl R ).
.It
Некоторые записи ресурсов форматируются иначе. Например,
записи
.Cm RRSIG
и
.Cm DNSKEY
отображаются без пробелов в них.
.It
При разборе
.Pa /etc/resolv.conf
команды
.Ic sortlist
и
.Ic options
игнорируются. Если присутствуют несколько команд
.Ic search
и/или
.Ic domain ,
.Nm
сначала использует последнюю команду
.Ic domain ,
а затем все команды
.Ic search ,
в то время как
.Sq host
из BIND9 использует любую команду, указанную последней.
.It
В подробном выводе пакета отсутствует
.Sq Псевдосекция TSIG .
.El
.Sh АВТОРЫ
.An Vitaly Magerya Aq magv@tx97.net
