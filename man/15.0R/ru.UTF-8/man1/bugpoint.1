.\" Man page generated from reStructuredText.
.\" FRDP path ./usr.bin/clang/bugpoint/bugpoint.1
.\" FRDP githash a324c34037ef2e1101962fca4ad0c021253288e1
.\" FRDP hash256 74e6c8e0ef960b4fe89ce0250566b5d362d713b0008ff8b7586a7bb828df3762
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
..
.de UNINDENT
. RE
.nr rst2man-indent-level -1
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH ИМЯ
bugpoint \- автоматизированный инструмент для сокращения тестовых случаев
.SH СИНТАКСИС
.sp
\fBbugpoint\fP [\fIопции\fP] [\fIвходные LLVM ll/bc файлы\fP] [\fIпроходы LLVM\fP] \fB\-\-args\fP
\fIаргументы программы\fP
.SH ОПИСАНИЕ
.sp
\fBbugpoint\fP помогает локализовать источник проблем в инструментах и проходах LLVM. Он
может использоваться для отладки трёх типов сбоев: падений оптимизатора,
неправильной компиляции оптимизаторами или некорректной генерации машинного кода (включая проблемы в статических и JIT-компиляторах). Его цель — сократить большие тестовые случаи до небольших, полезных. Для получения дополнительной информации о дизайне и внутреннем устройстве \fBbugpoint\fP, а также советов по его использованию, см. \fI\%Инструмент LLVM bugpoint: дизайн и использование\fP в дистрибутиве LLVM.
.SH ОПЦИИ
.sp
\fB\-\-additional\-so\fP \fIбиблиотека\fP
.INDENT 0.0
.INDENT 3.5
Загружать динамическую разделяемую библиотеку \fIбиблиотека\fP в тестируемую программу каждый раз при её запуске. Это полезно, если вы отлаживаете программы, которые для работы зависят от библиотек, не относящихся к LLVM (таких как библиотеки X или curses).
.UNINDENT
.UNINDENT
.sp
\fB\-\-append\-exit\-code\fP=\fI{true,false}\fP
.INDENT 0.0
.INDENT 3.5
Добавлять код завершения тестовой программы в выходной файл, чтобы изменение кода завершения считалось сбоем теста. По умолчанию false.
.UNINDENT
.UNINDENT
.sp
\fB\-\-args\fP \fIаргументы_программы\fP
.INDENT 0.0
.INDENT 3.5
Передавать все аргументы, указанные после \fB\-\-args\fP, тестовой программе при каждом её запуске.
Обратите внимание, что если любой из \fIаргументов_программы\fP начинается с \(dq\fB\-\fP\(dq, следует использовать:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
bugpoint [аргументы_bugpoint] \-\-args \-\- [аргументы_программы]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Символы \(dq\fB\-\-\fP\(dq сразу после опции \fB\-\-args\fP указывают \fBbugpoint\fP рассматривать
любые опции, начинающиеся с \(dq\fB\-\fP\(dq, как часть опции \fB\-\-args\fP, а не как опции для самого \fBbugpoint\fP.
.UNINDENT
.UNINDENT
.sp
\fB\-\-tool\-args\fP \fIаргументы_инструмента\fP
.INDENT 0.0
.INDENT 3.5
Передавать все аргументы, указанные после \fB\-\-tool\-args\fP, тестируемому инструменту LLVM
(\fBllc\fP, \fBlli\fP и т.д.) при каждом его запуске. Эту опцию следует использовать следующим образом:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
bugpoint [аргументы_bugpoint] \-\-tool\-args \-\- [аргументы_инструмента]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Символы \(dq\fB\-\-\fP\(dq сразу после опции \fB\-\-tool\-args\fP указывают \fBbugpoint\fP
рассматривать любые опции, начинающиеся с \(dq\fB\-\fP\(dq, как часть опции \fB\-\-tool\-args\fP,
а не как опции для самого \fBbugpoint\fP. (См. \fB\-\-args\fP выше.)
.UNINDENT
.UNINDENT
.sp
\fB\-\-safe\-tool\-args\fP \fIаргументы_инструмента\fP
.INDENT 0.0
.INDENT 3.5
Передавать все аргументы, указанные после \fB\-\-safe\-tool\-args\fP, инструменту \(dqбезопасного\(dq выполнения.
.UNINDENT
.UNINDENT
.sp
\fB\-\-gcc\-tool\-args\fP \fIаргументы_gcc\fP
.INDENT 0.0
.INDENT 3.5
Передавать все аргументы, указанные после \fB\-\-gcc\-tool\-args\fP, вызову
\fBgcc\fP\&.
.UNINDENT
.UNINDENT
.sp
\fB\-\-opt\-args\fP \fIаргументы_opt\fP
.INDENT 0.0
.INDENT 3.5
Передавать все аргументы, указанные после \fB\-\-opt\-args\fP, вызову \fBopt\fP\&.
.UNINDENT
.UNINDENT
.sp
\fB\-\-disable\-{dce,simplifycfg}\fP
.INDENT 0.0
.INDENT 3.5
Не запускать указанные проходы для очистки и уменьшения размера тестовой
программы. По умолчанию \fBbugpoint\fP использует эти проходы внутри себя при попытке
сократить тестовые программы. Если вы пытаетесь найти ошибку в одном из этих проходов,
\fBbugpoint\fP может аварийно завершиться.
.UNINDENT
.UNINDENT
.sp
\fB\-\-enable\-valgrind\fP
.INDENT 0.0
.INDENT 3.5
Использовать valgrind для поиска ошибок в фазе оптимизации. Это позволит
bugpoint находить иные бессимптомные проблемы, вызванные некорректным
управлением памятью.
.UNINDENT
.UNINDENT
.sp
\fB\-find\-bugs\fP
.INDENT 0.0
.INDENT 3.5
Постоянно рандомизировать указанные проходы и применять их к тестовой программе
до тех пор, пока не будет найдена ошибка или пользователь не завершит работу \fBbugpoint\fP\&.
.UNINDENT
.UNINDENT
.sp
\fB\-help\fP
.INDENT 0.0
.INDENT 3.5
Вывести краткую сводку параметров командной строки.
.UNINDENT
.UNINDENT
.sp
\fB\-\-input\fP \fIимя_файла\fP
.INDENT 0.0
.INDENT 3.5
Открыть \fIимя_файла\fP и перенаправить стандартный ввод тестовой программы при каждом
её запуске на чтение из этого файла.
.UNINDENT
.UNINDENT
.sp
\fB\-\-load\fP \fIплагин\fP
.INDENT 0.0
.INDENT 3.5
Загрузить динамический объект \fIплагин\fP в сам \fBbugpoint\fP. Этот объект должен
регистрировать новые проходы оптимизации. После загрузки объект добавит новые параметры
командной строки для включения различных оптимизаций. Чтобы увидеть новый полный список
оптимизаций, используйте опции \fB\-help\fP и \fB\-\-load\fP вместе; например:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
bugpoint \-\-load myNewPass.so \-help
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fB\-\-mlimit\fP \fIмегабайты\fP
.INDENT 0.0
.INDENT 3.5
Задаёт верхний предел использования памяти для оптимизации и генерации кода. Установите
в ноль для отключения ограничения.
.UNINDENT
.UNINDENT
.sp
\fB\-\-output\fP \fIимя_файла\fP
.INDENT 0.0
.INDENT 3.5
Когда тестовая программа выводит данные в свой стандартный поток вывода, они
должны совпадать с содержимым \fIимя_файла\fP (эталонный вывод). Если вы
не используете эту опцию, \fBbugpoint\fP попытается сгенерировать эталонный вывод,
скомпилировав программу с использованием \(dqбезопасного\(dq бэкенда и запустив её.
.UNINDENT
.UNINDENT
.sp
\fB\-\-run\-{int,jit,llc,custom}\fP
.INDENT 0.0
.INDENT 3.5
При каждой компиляции тестовой программы \fBbugpoint\fP должен генерировать для неё код
с использованием указанного генератора кода. Эти опции позволяют выбрать
интерпретатор, JIT-компилятор, статический компилятор машинного кода или
пользовательскую команду (см. \fB\-\-exec\-command\fP) соответственно.
.UNINDENT
.UNINDENT
.sp
\fB\-\-safe\-{llc,custom}\fP
.INDENT 0.0
.INDENT 3.5
При отладке генератора кода \fBbugpoint\fP должен использовать указанный генератор
кода в качестве \(dqбезопасного\(dq генератора кода. Это заведомо исправный генератор кода,
используемый для генерации \(dqэталонного вывода\(dq, если он не был предоставлен, и для
компиляции частей программы по мере их исключения из тестового случая.
Эти опции позволяют выбрать
статический компилятор машинного кода или пользовательскую команду (см. \fB\-\-exec\-command\fP)
соответственно. Интерпретатор и JIT-бэкенды в настоящее время не могут
использоваться в качестве \(dqбезопасных\(dq бэкендов.
.UNINDENT
.UNINDENT
.sp
\fB\-\-exec\-command\fP \fIкоманда\fP
.INDENT 0.0
.INDENT 3.5
Эта опция определяет команду для использования с опциями \fB\-\-run\-custom\fP и
\fB\-\-safe\-custom\fP для выполнения тестового случая в bitcode. Это может
быть полезно для кросс-компиляции.
.UNINDENT
.UNINDENT
.sp
\fB\-\-compile\-command\fP \fIкоманда\fP
.INDENT 0.0
.INDENT 3.5
Эта опция определяет команду для использования с опцией \fB\-\-compile\-custom\fP
для компиляции тестового случая в bitcode. Команда должна завершаться с кодом
ошибки, если файл \(dqинтересен\(dq, и должна завершаться с кодом успеха
(т.е. 0) в противном случае (это то же самое, как если бы она падала на
\(dqинтересных\(dq входах).
.sp
Это может быть полезно для
тестирования вывода компилятора без запуска каких-либо этапов компоновки или выполнения. Для
генерации сокращённого модульного теста вы можете добавить директивы CHECK в
тестовый случай и передать имя исполняемого скрипта compile-command в таком виде:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
#!/bin/sh
llc \(dq$@\(dq
not FileCheck [входной_файл_bugpoint].ll < bugpoint\-test\-program.s
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Этот скрипт будет \(dqпадать\(dq до тех пор, пока FileCheck проходит. Таким образом, результатом
будет минимальный bitcode, который проходит проверку FileCheck.
.UNINDENT
.UNINDENT
.sp
\fB\-\-safe\-path\fP \fIпуть\fP
.INDENT 0.0
.INDENT 3.5
Эта опция определяет путь к команде для выполнения с
опциями \fB\-\-safe\-{int,jit,llc,custom}\fP\&.
.UNINDENT
.UNINDENT
.sp
\fB\-\-verbose\-errors\fP=\fI{true,false}\fP
.INDENT 0.0
.INDENT 3.5
Поведение bugpoint по умолчанию — печатать \(dq<crash>\(dq, когда он находит сокращённый
тест, который приводит к падению компиляции. Этот флаг выводит результат работы падающей
программы в stderr. Это полезно, чтобы убедиться, что это та же самая ошибка, которую
отслеживают, а не другая ошибка, которая также приводит к падению компилятора.
По умолчанию false.
.UNINDENT
.UNINDENT
.SH СТАТУС ВЫХОДА
.sp
Если \fBbugpoint\fP успешно находит проблему, он завершится с кодом 0. В противном случае,
если произойдёт ошибка, он завершится с ненулевым значением.
.SH СМ. ТАКЖЕ
.sp
\fBopt(1)\fP
.SH АВТОРЫ
Поддерживается командой LLVM (https://llvm.org/).
.SH АВТОРСКИЕ ПРАВА
2003-2023, LLVM Project
