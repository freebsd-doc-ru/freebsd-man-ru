.\"-
.\" SPDX-License-Identifier: BSD-2-Clause
.\"
.\" Copyright (c) 2007-2008 Dag-Erling Smørgrav
.\" All rights reserved.
.\"
.\" FRDP path ./contrib/libarchive/unzip/bsdunzip.1
.\" FRDP githash bd66c1b43e33540205dbc1187c2f2a15c58b57ba
.\" FRDP hash256 0a3732a1daf902661fa4044ea38aff151311ded815607a414ac10d1959559864
.Dd 27 июня 2023
.Dt BSDUNZIP 1
.Os
.Sh ИМЯ
.Nm bsdunzip
.Nd извлечение файлов из ZIP-архива
.Sh СИНТАКСИС
.Nm
.Op Fl aCcfjLlnopqtuvy
.Op { Fl O | Fl I No } Ar кодировка
.Op Fl d Ar каталог
.Op Fl x Ar шаблон
.Op Fl P Ar пароль
.Ar zipfile
.Op Ar член ...
.Sh ОПИСАНИЕ
Доступны следующие опции:
.Bl -tag -width Fl
.It Fl a
При извлечении текстового файла преобразовывать концы строк в стиле DOS
в концы строк в стиле Unix.
.It Fl C
Сопоставлять имена файлов без учёта регистра.
.It Fl c
Извлекать в stdout/экран.
При извлечении файлов из zip-архива они записываются в stdout.
Это похоже на
.Fl p ,
но не подавляет обычный вывод.
.It Fl d Ar каталог
Извлекать файлы в указанный каталог вместо текущего
каталога.
.It Fl f
Обновлять существующие.
Извлекать только те файлы из zip-архива, если файл с тем же именем
уже существует на диске и является более старым, чем предыдущий.
В противном случае файл тихо пропускается.
.It Fl I Ar кодировка
.It Fl O Ar кодировка
Преобразовывать имена файлов из указанной кодировки.
.It Fl j
Игнорировать каталоги, хранящиеся в zip-архиве; вместо этого извлекать все файлы
непосредственно в каталог извлечения.
.It Fl L
Преобразовывать имена извлечённых файлов и каталогов в нижний регистр.
.It Fl l
Выводить список, а не извлекать, содержимое zip-архива.
.It Fl n
Не перезаписывать.
При извлечении файла из zip-архива, если файл с тем же именем
уже существует на диске, файл тихо пропускается.
.It Fl o
Перезаписывать.
При извлечении файла из zip-архива, если файл с тем же именем
уже существует на диске, существующий файл заменяется файлом
из zip-архива.
.It Fl p
Извлекать в stdout.
При извлечении файлов из zip-архива они записываются в stdout.
Обычный вывод подавляется, как если бы
была указана опция
.Fl q .
.It Fl P Ar пароль
Извлекать зашифрованные файлы с использованием пароля.
Размещение пароля в командной строке с использованием этой опции может быть
небезопасным.
.It Fl q
Тихо: выводить меньше информации при извлечении.
.It Fl t
Тест: ничего не извлекать, но проверять контрольную сумму каждого файла
в архиве.
.It Fl u
Обновление.
При извлечении файла из zip-архива, если файл с тем же именем
уже существует на диске, существующий файл заменяется файлом
из zip-архива тогда и только тогда, когда последний новее, чем первый.
В противном случае файл тихо пропускается.
.It Fl v
Выводить подробный список, а не извлекать, содержимое zip-архива.
Это отличается от
.Fl l
использованием длинного листинга.
Обратите внимание, что большинство данных в настоящее время являются фиктивными и не отражают
содержимое архива.
.It Fl x Ar шаблон
Исключать файлы, соответствующие шаблону
.Ar шаблон .
.It Fl y
Выводить четырёхзначные годы в списках вместо двухзначных.
.It Fl Z Ar режим
Эмулировать режим
.Xr zipinfo 1L .
Включение режима
.Xr zipinfo 1L
изменяет способ разбора дополнительных аргументов.
В настоящее время поддерживается только режим 1
.Xr zipinfo 1L , который выводит имена файлов по одному в строке.
.It Ar [член ...]
Необязательный список членов для извлечения из zip-архива.
Может включать шаблоны, например,
.Ar 'memberdir/*'
извлечёт все файлы и каталоги внутри memberdir.
.El
.Pp
Обратите внимание, что только одна из опций
.Fl n ,
.Fl o ,
и
.Fl u
может быть указана.
Если указанное имя файла —
.Qq - ,
то данные читаются из
.Va stdin .
.Sh ОКРУЖЕНИЕ
Если определена переменная окружения
.Ev UNZIP_DEBUG ,
опция командной строки
.Fl q
не имеет эффекта, и дополнительная отладочная
информация будет выводиться в
.Va stderr .
.Sh СОВМЕСТИМОСТЬ
Утилита
.Nm
стремится быть достаточно совместимой с другими реализациями,
чтобы служить заменой в контексте системы
.Xr ports 7 .
Не предпринималось попыток воспроизвести функциональность, которая не
требуется для этой цели.
.Pp
По соображениям совместимости, опции командной строки будут распознаваться, если
они перечислены не только до, но и после имени
zip-архива.
.Pp
Обычно опция
.Fl a
должна влиять только на файлы, которые помечены как текстовые в
центральном каталоге zip-архива.
Поскольку библиотека
.Xr archive 3
не предоставляет доступа к этой информации, она недоступна
для утилиты
.Nm .
Вместо этого утилита
.Nm
будет предполагать, что файл является текстовым, если нет не-ASCII
символов в первом блоке данных, распакованном для
этого файла.
Если не-ASCII символы появляются в последующих блоках данных, будет выдано
предупреждение.
.Pp
Утилита
.Nm
способна обрабатывать только ZIP-архивы, поддерживаемые
.Xr libarchive 3 .
В зависимости от установленной версии
.Xr libarchive 3 ,
это может включать или не включать самораспаковывающиеся или ZIPX архивы.
.Sh СМ. ТАКЖЕ
.Xr libarchive 3
.Sh ИСТОРИЯ
Утилита
.Nm
появилась в
.Fx 8.0 .
.Sh АВТОРЫ
Утилита
.Nm
и эта страница руководства были написаны
.An Dag-Erling Sm\(/orgrav Aq Mt des@FreeBSD.org .
Она использует библиотеку
.Xr archive 3
разработанную
.An Tim Kientzle Aq Mt kientzle@FreeBSD.org .
.Sh ПРЕДОСТЕРЕЖЕНИЯ
Утилита
.Nm
выполняет два сканирования командной строки для аргументов до
и после имени архива, чтобы поддерживать совместимость с
Info-ZIP unzip.
В результате, POSIX
.Ql --
строка с двойным тире, используемая для разделения опций и аргументов, должна быть
повторена.
потребуется вызвать
.Dl bsdunzip -o -- -a.jpg -- -b.zip
