.\" Copyright (c) 1989, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)hexdump.1	8.2 (Berkeley) 4/18/94
.\"
.\" FRDP path ./usr.bin/hexdump/hexdump.1
.\" FRDP githash bdcbfde31e8e9b343f113a1956384bdf30d1ed62
.\" FRDP hash256 ee4f5a4325c03f3e8ab6498d96b0a07ca3460e7fb1a49a45bb7e5ec357cb5314
.Dd 29 июня 2020
.Dt HEXDUMP 1
.Os
.Sh ИМЯ
.Nm hexdump , hd
.Nd дамп ASCII, десятичный, шестнадцатеричный, восьмеричный
.Sh СИНТАКСИС
.Nm
.Op Fl bcCdovx
.Op Fl e Ar строка_формата
.Op Fl f Ar файл_формата
.Op Fl n Ar длина
.Bk -words
.Op Fl s Ar смещение
.Ek
.Ar
.Nm hd
.Op Fl bcdovx
.Op Fl e Ar строка_формата
.Op Fl f Ar файл_формата
.Op Fl n Ar длина
.Bk -words
.Op Fl s Ar смещение
.Ek
.Ar
.Sh ОПИСАНИЕ
Утилита
.Nm
является фильтром, который отображает указанные файлы или
стандартный ввод (если файлы не указаны) в формате, заданном пользователем.
.Pp
Параметры следующие:
.Bl -tag -width indent
.It Fl b
.Em Однобайтовое восьмеричное отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют шестнадцать
разделенных пробелами, трехколоночных, дополненных нулями байтов входных данных
в восьмеричном виде на строку.
.It Fl c
.Em Однобайтовое символьное отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют шестнадцать
разделенных пробелами, трехколоночных, дополненных пробелами символов входных
данных на строку.
.It Fl C
.Em Каноническое шестнадцатеричное+ASCII отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют шестнадцать
разделенных пробелами, двухколоночных шестнадцатеричных байтов, за которыми идут
те же шестнадцать байтов в формате %_p, заключенные в символы ``|''.
.Pp
Вызов команды
.Nm hd
подразумевает использование этого параметра.
.It Fl d
.Em Двухбайтовое десятичное отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют восемь
разделенных пробелами, пятиколоночных, дополненных нулями, двухбайтовых единиц
входных данных в беззнаковом десятичном виде на строку.
.It Fl e Ar строка_формата
Задает строку формата для отображения данных.
.It Fl f Ar файл_формата
Задает файл, содержащий одну или несколько строк формата, разделенных символом новой строки.
Пустые строки и строки, у которых первый непустой символ является знаком решетки
.Pf ( Cm \&# ) ,
игнорируются.
.It Fl n Ar длина
Интерпретировать только
.Ar длина
байтов ввода.
.It Fl o
.Em Двухбайтовое восьмеричное отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют восемь
разделенных пробелами, шестиколоночных, дополненных нулями, двухбайтовых величин
входных данных в восьмеричном виде на строку.
.It Fl s Ar смещение
Пропустить
.Ar смещение
байтов от начала ввода.
По умолчанию
.Ar смещение
интерпретируется как десятичное число.
Если перед ним указаны
.Cm 0x
или
.Cm 0X ,
.Ar смещение
интерпретируется как шестнадцатеричное число,
в противном случае, если перед ним стоит
.Cm 0 ,
.Ar смещение
интерпретируется как восьмеричное число.
Добавление символа
.Cm b ,
.Cm k ,
или
.Cm m
к
.Ar смещение
приводит к его интерпретации как кратного
.Li 512 ,
.Li 1024 ,
или
.Li 1048576 ,
соответственно.
.It Fl v
Заставляет
.Nm
отображать все входные данные.
Без параметра
.Fl v
любое количество групп выходных строк, которые были бы
идентичны непосредственно предшествующей группе выходных строк (за исключением
смещений ввода), заменяется строкой, состоящей из
одной звездочки.
.It Fl x
.Em Двухбайтовое шестнадцатеричное отображение.
Отображает смещение ввода в шестнадцатеричном виде, за которым следуют восемь, разделенных
пробелами, четырехколоночных, дополненных нулями, двухбайтовых величин входных
данных в шестнадцатеричном виде на строку.
.El
.Pp
Для каждого входного файла
.Nm
последовательно копирует ввод на стандартный вывод, преобразуя
данные в соответствии со строками формата, заданными параметрами
.Fl e
и
.Fl f ,
в том порядке, в котором они были указаны.
.Ss Форматы
Строка формата содержит любое количество единиц формата, разделенных
пробельными символами.
Единица формата содержит до трех элементов: счетчик итераций, количество
байтов и формат.
.Pp
Счетчик итераций — это необязательное положительное целое число, по умолчанию равное
единице.
Каждый формат применяется количество раз, указанное в счетчике итераций.
.Pp
Количество байтов — это необязательное положительное целое число.
Если указано, оно определяет количество байтов, интерпретируемых
каждой итерацией формата.
.Pp
Если указаны счетчик итераций и/или количество байтов, необходимо поставить
один слэш после счетчика итераций и/или перед количеством байтов,
чтобы устранить неоднозначность.
Любые пробельные символы до или после слэша игнорируются.
.Pp
Формат является обязательным и должен быть заключен в двойные кавычки
и интерпретируется как строка формата в стиле fprintf (см.
.Xr fprintf 3 ) ,
со следующими исключениями:
.Bl -bullet -offset indent
.It
Звездочка (*) не может использоваться в качестве ширины поля или точности.
.It
Количество байтов или точность поля
.Em требуется
для каждого символа преобразования ``s''
(в отличие от
.Xr fprintf 3 ,
где по умолчанию выводится вся строка, если точность не указана).
.It
Символы преобразования ``h'', ``l'', ``n'', ``p'' и ``q''
не поддерживаются.
.It
Поддерживаются escape-последовательности одного символа,
описанные в стандарте C:
.Bd -ragged -offset indent -compact
.Bl -column <alert_character>
.El
.Ed
.El
.Pp
Утилита
.Nm
также поддерживает следующие дополнительные строки преобразования:
.Bl -tag -width Fl
.It Cm \&_a Ns Op Cm dox
Отображает смещение ввода, накопительное по всем входным файлам, для
следующего байта, который будет отображен.
Добавленные символы
.Cm d ,
.Cm o ,
и
.Cm x
задают основание отображения
как десятичное, восьмеричное или шестнадцатеричное соответственно.
.It Cm \&_A Ns Op Cm dox
Идентична строке преобразования
.Cm \&_a ,
за исключением того, что выполняется
только один раз, когда все входные данные были обработаны.
.It Cm \&_c
Выводит символы в наборе символов по умолчанию.
Непечатаемые символы отображаются в трехсимвольном, дополненном нулями
восьмеричном виде, за исключением тех, которые могут быть представлены стандартными escape-обозначениями
(см. выше),
которые отображаются как двухсимвольные строки.
.It Cm _p
Выводит символы в наборе символов по умолчанию.
Непечатаемые символы отображаются как одиночный
.Dq Cm \&. .
.It Cm _u
Выводит символы US ASCII
с тем исключением, что управляющие символы
отображаются с использованием следующих имен в нижнем регистре.
Символы больше 0xff (шестнадцатеричные) отображаются как шестнадцатеричные
строки.
.Bl -column 000_nu 001_so 002_st 003_et 004_eo
.El
.El
.Pp
Количество байтов по умолчанию и поддерживаемые для символов преобразования
следующие:
.It Li \&%_c , \&%_p , \&%_u , \&%c
Только однобайтовые.
.It Xo
.Li \&%d , \&%i , \&%o ,
.Li \&%u , \&%X , \&%x
.Xc
Четыре байта по умолчанию, поддерживаются однобайтовые, двухбайтовые и четырехбайтовые.
.It Xo
.Li \&%E , \&%e , \&%f ,
.Li \&%G , \&%g
.Xc
Восемь байтов по умолчанию, поддерживаются четырехбайтовые и двенадцатибайтовые.
.El
.Pp
Объем данных, интерпретируемых каждой строкой формата, представляет собой сумму
данных, требуемых каждой единицей формата, которая равна произведению счетчика итераций на
количество байтов, или произведению счетчика итераций на количество байтов, требуемое
форматом, если количество байтов не указано.
.Pp
Ввод обрабатывается «блоками», где блок определяется как
максимальный объем данных, заданный любой строкой формата.
Строки формата, интерпретирующие меньше данных, чем размер блока ввода,
и у которых последняя единица формата интерпретирует некоторое количество байтов и не
имеет заданного счетчика итераций, увеличивают счетчик итераций
до тех пор, пока весь входной блок не будет обработан или пока в
блоке не останется достаточно данных для удовлетворения строки формата.
.Pp
Если в результате указания пользователем или
модификации счетчика итераций
.Nm ,
как описано выше, счетчик итераций
становится больше единицы, завершающие пробельные символы не выводятся
во время последней итерации.
.Pp
Ошибкой является указание количества байтов, а также нескольких символов
преобразования или строк, если только все, кроме одного из символов преобразования
или строк, не являются
.Cm \&_a
или
.Cm \&_A .
.Pp
Если в результате указания параметра
.Fl n
или достижения конца файла входные данные лишь частично
удовлетворяют строке формата, входной блок дополняется нулями в достаточной степени,
чтобы отобразить все доступные данные (т.е. любые единицы формата, перекрывающие
конец данных, отобразят некоторое количество нулевых байтов).
.Pp
Дальнейший вывод такими строками формата заменяется эквивалентным
количеством пробелов.
Эквивалентное количество пробелов определяется как количество пробелов,
выводимых символом преобразования
.Cm s
с той же шириной поля
и точностью, что и исходный символ преобразования или строка
преобразования, но с удаленными любыми символами флагов преобразования
.Dq Li \&+ ,
.Dq \&\ \& ,
.Dq Li \&#
и ссылающимся на NULL-строку.
.Pp
Если строки формата не указаны, отображение по умолчанию эквивалентно
указанию параметра
.Fl x .
.Sh СТАТУС ВЫХОДА
.Ex -std hexdump hd
.Sh ПРИМЕРЫ
Дамп ввода в канонической (шестнадцатеричной+ASCII) форме:
.Bd -literal -offset indent
00000000  46 72 65 65 42 53 44 3a  20 54 68 65 20 70 6f 77  |FreeBSD: The pow|
00000010  65 72 20 74 6f 20 73 65  72 76 65 0a              |er to serve.|
0000001c
.Ed
.Pp
То же, что и выше, но с пропуском первых 4 байтов stdin и интерпретацией только 3
байтов ввода:
.Bd -literal -offset indent
00000004  42 53 44                                          |BSD|
00000007
.Ed
.Pp
Предполагая файл формата с именем
.Pa format.txt
со следующим содержимым, которое задает формат просмотра:
.Bd -literal -offset indent
.Ed
.Pp
Дамп ввода в канонической форме с использованием формата из
.Pa format.txt :
.Bd -literal -offset indent
000000   F   r   e   e   B   S   D  lf                          F r e e B S D .
00000000  46 72 65 65 42 53 44 0a                           |FreeBSD.|
00000008
.Ed
.Pp
Предполагая файл формата с именем
.Pa format.txt
со следующим содержимым, которое имитирует параметр
.Fl x :
.Bd -literal -offset indent
.Ed
.Pp
Дамп ввода в канонической форме с использованием формата из
.Pa format.txt :
.Bd -literal -offset indent
0000000  7246 6565 5342 3a44 5420 6568 7020 776f
00000000  46 72 65 65 42 53 44 3a  20 54 68 65 20 70 6f 77  |FreeBSD: The pow|
0000010  7265 7420 206f 6573 7672 0a65
00000010  65 72 20 74 6f 20 73 65  72 76 65 0a              |er to serve.|
0000001c
.Ed
.Sh СМ. ТАКЖЕ
.Xr od 1
