.\" $Id: luac.man,v 1.29 2011/11/16 13:53:40 lhf Exp $
.\" FRDP path ./contrib/lua/doc/luac.1
.\" FRDP githash 8e3e3a7ae841ccf6f6ac30a2eeab85df5d7f04bc
.\" FRDP hash256 aa9b430977fd6997efcfae44aa7b7bf34d7e8ecdfda26984f78ffec52ace7f14
.SH ИМЯ
luac \- компилятор Lua
.SH СИНТАКСИС
.B luac
[
.I опции
] [
.I имена_файлов
]
.SH ОПИСАНИЕ
.B luac
является компилятором Lua.
Он переводит программы, написанные на языке программирования Lua,
в двоичные файлы, содержащие предварительно скомпилированные блоки,
которые могут быть впоследствии загружены и выполнены.
.LP
Основные преимущества предварительной компиляции блоков:
более быстрая загрузка,
защита исходного кода от случайных изменений пользователем,
и
проверка синтаксиса в автономном режиме.
Предварительная компиляция не подразумевает более быстрого выполнения,
поскольку в Lua блоки всегда компилируются в байт-коды перед выполнением.
.B luac
просто позволяет сохранять эти байт-коды в файле для последующего выполнения.
Предварительно скомпилированные блоки не обязательно меньше соответствующих исходных файлов.
Основная цель предварительной компиляции — ускорение загрузки.
.LP
В командной строке
вы можете смешивать
текстовые файлы, содержащие исходный код Lua, и
двоичные файлы, содержащие предварительно скомпилированные блоки.
.B luac
создает единый выходной файл, содержащий объединенные байт-коды
для всех заданных файлов.
Выполнение объединенного файла эквивалентно выполнению заданных файлов.
По умолчанию
выходной файл называется
.BR luac.out ,
но вы можете изменить это с помощью опции
.B \-o .
.LP
Предварительно скомпилированные блоки
.I не
переносимы между различными архитектурами.
Более того,
внутренний формат предварительно скомпилированных блоков
может измениться с выходом новой версии Lua.
Убедитесь, что вы сохраняете исходные файлы всех программ Lua, которые вы компилируете заранее.
.LP
.SH ОПЦИИ
.TP
.B \-l
создать листинг скомпилированного байт-кода для виртуальной машины Lua.
Листинг байт-кодов полезен для изучения виртуальной машины Lua.
Если файлы не указаны, то
.B luac
загружает
.B luac.out
и выводит его содержимое.
Используйте
.B \-l \-l
для полного листинга.
.TP
.B \-o
вывод в
.I файл ,
вместо используемого по умолчанию
.BR luac.out .
(Вы можете использовать
.B \-
для стандартного вывода,
но не на платформах, где стандартный вывод открывается в текстовом режиме.)
Выходной файл может быть одним из заданных файлов, поскольку
все файлы загружаются перед записью выходного файла.
Будьте осторожны, чтобы не перезаписать важные файлы.
.TP
.B \-p
загрузить файлы, но не создавать выходной файл.
Используется в основном для проверки синтаксиса и тестирования предварительно скомпилированных блоков:
поврежденные файлы, вероятно, вызовут ошибки при загрузке.
Если файлы не указаны, то
.B luac
загружает
.B luac.out
и проверяет его содержимое.
Сообщения не выводятся, если файл загружается без ошибок.
.TP
.B \-s
удалить отладочную информацию перед записью выходного файла.
Это экономит некоторое место в очень больших блоках,
но если при выполнении очищенного блока возникают ошибки,
то сообщения об ошибках могут не содержать полной информации, как обычно.
В частности,
номера строк и имена локальных переменных теряются.
.TP
.B \-v
показать информацию о версии.
.TP
.B \-\-
прекратить обработку опций.
.TP
.B \-
прекратить обработку опций и обработать стандартный ввод.
.SH СМ. ТАКЖЕ
.BR lua (1)
.br
Документация на lua.org.
.SH ДИАГНОСТИКА
Сообщения об ошибках должны быть понятными.
.SH АВТОРЫ
Р. Иерусалимши,
Л. Х. де Фигейредо,
В. Селес
