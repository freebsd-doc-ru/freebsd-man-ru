.\" Copyright (c) 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)jot.1	8.1 (Berkeley) 6/6/93
.\"
.\" FRDP path ./usr.bin/jot/jot.1
.\" FRDP githash bdcbfde31e8e9b343f113a1956384bdf30d1ed62
.\" FRDP hash256 c6f1c4f52d72a18766f67b35d4f021702e4d70c69bb67bb1538898afe1ff6748
.Dd 21 сентября 2019
.Dt JOT 1
.Os
.Sh ИМЯ
.Nm jot
.Nd вывод последовательных или случайных данных
.Sh СИНТАКСИС
.Nm
.Op Fl cnr
.Op Fl b Ar слово
.Op Fl w Ar слово
.Op Fl s Ar строка
.Op Fl p Ar точность
.Op Ar повторения Op Ar начало Op Ar конец Op Ar шаг
.Sh ОПИСАНИЕ
Утилита
.Nm
используется для вывода возрастающих, убывающих, случайных
или избыточных данных, обычно чисел, по одному на строку.
.Pp
Доступны следующие опции:
.Bl -tag -width indent
.It Fl r
Генерировать случайные данные вместо данных по умолчанию.
.It Fl b Ar слово
Просто повторяющийся вывод
.Ar слова .
.It Fl w Ar слово
Вывод
.Ar слова
с добавлением сгенерированных данных.
Восьмеричное, шестнадцатеричное, экспоненциальное,
.Tn ASCII ,
дополненное нулями
и выровненное вправо представление
возможно с использованием соответствующей
спецификации преобразования
.Xr printf 3
внутри
.Ar слова ,
в этом случае данные вставляются, а не добавляются.
.It Fl c
Сокращение для
.Fl w Ar %c .
.It Fl s Ar строка
Вывод данных, разделенных
.Ar строкой .
Обычно данные разделяются символами новой строки.
.It Fl n
Не выводить завершающий символ новой строки, обычно добавляемый к выводу.
.It Fl p Ar точность
Выводить только столько цифр или символов данных,
сколько указано целым числом
.Ar точность .
При отсутствии
.Fl p ,
точность равна наибольшей из точностей
.Ar начала
и
.Ar конца .
Опция
.Fl p
переопределяется тем, что указано в
спецификации преобразования
.Xr printf 3
после
.Fl w .
.El
.Pp
Последние четыре аргумента указывают соответственно
количество данных, нижнюю границу, верхнюю границу
и шаг приращения или, для случайных данных, затравку.
Хотя хотя бы один из них должен быть указан,
любой из остальных трех может быть опущен и
будет рассматриваться как опущенный, если передан как
или как пустая строка.
Любые три из этих аргументов определяют четвертый.
Если указаны четыре и заданное и вычисленное значения
.Ar повторений
противоречат друг другу, используется меньшее значение.
Если указан один или два аргумента, значения по умолчанию назначаются,
начиная с
.Ar шага ,
для которого по умолчанию принимается 1 (или -1, если
.Ar начало
и
.Ar конец
определяют убывающий диапазон).
Затем значения по умолчанию назначаются самым левым пропущенным аргументам, пока
не будут установлены три аргумента.
.Pp
Значения по умолчанию для четырех аргументов составляют соответственно
100, 1, 100 и 1, за исключением случая, когда запрашиваются случайные данные,
и затравка
.Ar шаг
выбирается случайно.
Аргумент
.Ar повторения
ожидается как целое беззнаковое число,
и если задан как ноль, считается бесконечным.
Аргументы
.Ar начало
и
.Ar конец
могут быть заданы как вещественные числа или как символы,
представляющие соответствующее значение в
.Tn ASCII .
Последний аргумент должен быть вещественным числом.
.Pp
Случайные числа получаются через
.Xr arc4random 3 ,
когда затравка не указана,
и через
.Xr random 3 ,
когда затравка задана.
Когда
.Nm
просят сгенерировать случайные целые числа или символы со значениями начала
и конца в диапазоне функции генератора случайных чисел
и формат не задан с помощью одной из опций
.Fl w ,
.Fl b ,
или
.Fl p ,
.Nm
обеспечит равную вероятность появления всех значений в диапазоне
в выводе.
Во всех остальных случаях следует быть осторожным, чтобы гарантировать, что
округление или усечение формата вывода
не исказят распределение выходных
значений непреднамеренным образом.
.Pp
Название
.Nm
частично происходит от
.Nm iota ,
функции в APL.
.Ss Округление и усечение
Утилита
.Nm
внутренне использует арифметику с плавающей точкой двойной точности.
Перед выводом числа оно преобразуется в зависимости от используемого
формата вывода.
.Pp
Если формат вывода не указан или формат вывода является
форматом с плавающей точкой
.Po
.Sq E ,
.Sq G ,
.Sq e ,
.Sq f ,
или
.Sq g
.Pc ,
значение округляется с использованием функции
.Xr printf 3 ,
с учетом запрошенной точности.
.Pp
Если формат вывода является целочисленным форматом
.Po
.Sq D ,
.Sq O ,
.Sq U ,
.Sq X ,
.Sq c ,
.Sq d ,
.Sq i ,
.Sq o ,
.Sq u ,
или
.Sq x
.Pc ,
значение преобразуется в целочисленное путем усечения.
.Pp
В качестве иллюстрации рассмотрим следующую команду:
.Bd -literal -offset indent
$ jot 6 1 10 0.5
1
2
2
2
3
4
.Ed
.Pp
Запросив явную точность 1, можно увидеть значения, сгенерированные до округления.
Значения .5 округляются вниз, если целая часть четная,
вверх в противном случае.
.Bd -literal -offset indent
$ jot -p 1 6 1 10 0.5
1.0
1.5
2.0
2.5
3.0
3.5
.Ed
.Pp
Слегка сместив значения, можно добиться, чтобы значения, сгенерированные следующей
командой, всегда округлялись вниз:
.Bd -literal -offset indent
$ jot -p 0 6 .9999999999 10 0.5
1
1
2
2
3
3
.Ed
.Pp
Другой способ достичь того же результата — принудительное усечение путем
указания целочисленного формата:
.Bd -literal -offset indent
$ jot -w %d 6 1 10 0.5
.Ed
.Sh СТАТУС ВЫХОДА
.Ex -std
.Sh ПРИМЕРЫ
Команда
.Dl jot - 1 10
.Pp
выводит целые числа от 1 до 10,
в то время как команда
.Dl jot 21 -1 1.00
.Pp
выводит 21 равномерно распределенное число, возрастающее от -1 до 1.
Набор символов
.Tn ASCII
генерируется с помощью
.Dl jot -c 128 0
.Pp
и строки от xaa до xaz с помощью
.Dl jot -w xa%c 26 a
.Pp
в то время как 20 случайных 8-буквенных строк создаются с помощью
.Pp
Бесконечно много
.Em yes Ns 'ов
можно получить с помощью
.Dl jot -b yes 0
.Pp
и тридцать команд подстановки
.Xr ed 1 ,
применяемых к строкам 2, 7, 12 и т. д., это
результат команды
.Dl jot -w %ds/old/new/ 30 2 - 5
.Pp
Заикающаяся последовательность 9, 9, 8, 8, 7 и т. д. может быть
получена путем усечения точности вывода и подходящего выбора шага,
как в
.Dl jot -w %d - 9.5 0 -.5
.Pp
и файл, содержащий ровно 1024 байта, создается с помощью
.Dl jot -b x 512 > block
.Pp
Наконец, чтобы установить табуляции через каждые четыре пробела, начиная
с колонки 10 и заканчивая колонкой 132, используйте
.Dl expand -`jot -s, - 10 132 4`
.Pp
и чтобы вывести все строки длиной 80 символов или более,
.Sh ДИАГНОСТИКА
Следующие диагностические сообщения заслуживают особого объяснения:
.Bl -diag
Запрошенный спецификатор формата преобразования для
.Xr printf 3
не соответствовал форме
.Dl %[#][ ][{+,-}][0-9]*[.[0-9]*]?
где
.Dq ?\&
должен быть одним из
.Dl [l]{d,i,o,u,x}
или
.Dl {c,e,f,g,D,E,G,O,U,X}
Выводимое значение выходит за пределы диапазона типа данных,
связанного с запрошенным форматом вывода.
Указано более одного спецификатора формата преобразования,
но разрешен только один.
.El
.Sh СМ. ТАКЖЕ
.Xr ed 1 ,
.Xr expand 1 ,
.Xr rs 1 ,
.Xr seq 1 ,
.Xr yes 1 ,
.Xr arc4random 3 ,
.Xr printf 3 ,
.Xr random 3
.Sh ИСТОРИЯ
Утилита
.Nm
впервые появилась в
.Bx 4.2 .
.Sh АВТОРЫ
.An John A. Kunze
