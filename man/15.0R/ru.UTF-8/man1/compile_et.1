.\" Copyright (c) 1988 Massachusetts Institute of Technology,
.\" Student Information Processing Board.  All rights reserved.
.\"
.\" $FreeBSD$
.\"
.\" FRDP path ./contrib/com_err/compile_et.1
.\" FRDP githash aa12cea2ccc6e686d6d31cf67d6bc69cbc1ba744
.\" FRDP hash256 2b3bcc987032ff0f0eecc7b7393e52bd1af205e096c24fb6299b094058715df9
.Dd 22 ноября 1988
.Dt COMPILE_ET 1
.Os
.Sh ИМЯ
.Nm compile_et
.Nd компилятор таблиц ошибок
.Sh СИНТАКСИС
.Nm compile_et
.Ar файл
.Sh ОПИСАНИЕ
.Nm Compile_et
преобразует таблицу, содержащую имена кодов ошибок и связанные с ними сообщения,
в исходный файл на языке C, пригодный для использования с библиотекой
.Xr com_err 3 .
.Pp
Имя исходного файла должно заканчиваться суффиксом ``.et''; файл
состоит из объявления, задающего имя (длиной до четырёх символов)
таблицы кодов ошибок:
.Pp
.Em error_table имя
.Pp
за которым следует до 256 записей вида:
.Pp
.Em error_code имя ,
.No \(dq Ns Em строка Ns \(dq
.Pp
и завершающей строки
.Pp
.Em end
.Pp
для указания конца таблицы.
.Pp
Имя таблицы используется для формирования имени подпрограммы
.Em initialize_XXXX_error_table ,
которая должна быть вызвана, чтобы библиотека
.Xr com_err 3
распознала таблицу ошибок.
.Pp
Различным определённым кодам ошибок присваиваются последовательно
возрастающие числа (начиная с большого числа, вычисляемого как хеш-функция
от имени таблицы); поэтому для совместимости рекомендуется добавлять
новые коды только в конец существующей таблицы и не удалять коды из таблиц.
.Pp
Имена, определённые в таблице, помещаются в заголовочный файл C
с директивами препроцессора, определяющими их как целочисленные константы
величиной до 32 бит.
.Pp
Также генерируется исходный файл на C, который должен быть скомпилирован
и слинкован с объектными файлами, ссылающимися на эти коды ошибок; он содержит
тексты сообщений и подпрограмму инициализации.
Оба файла на C имеют имена, производные от имени исходного файла,
где суффикс ``.et'' заменяется на ``.c'' и ``.h''.
.Pp
Символ ``#'' в исходном файле трактуется как символ комментария,
и весь оставшийся текст до конца строки будет проигнорирован.
.Sh СМ. ТАКЖЕ
.Xr yacc 1 ,
.Xr com_err 3
.Rs
.%A Ken Raeburn
.Re
.Sh ИЗВЕСТНЫЕ ОШИБКИ
Поскольку
.Nm compile_et
использует очень простой парсер на основе
.Xr yacc 1 ,
его восстановление после ошибок оставляет желать лучшего.
