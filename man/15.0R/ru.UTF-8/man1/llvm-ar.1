.\" Man page generated from reStructuredText.
.\" FRDP path ./usr.bin/clang/llvm-ar/llvm-ar.1
.\" FRDP githash a324c34037ef2e1101962fca4ad0c021253288e1
.\" FRDP hash256 c233307fa5079332f73fd9c4d15fa19556a91ce9176b6ccccdf9254f753e978f
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
..
.de UNINDENT
. RE
.nr rst2man-indent-level -1
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH ИМЯ
llvm-ar \- архиватор LLVM
.SH СИНТАКСИС
.sp
\fBllvm\-ar\fP [\-]{dmpqrstx}[abcDilLNoOPsSTuUvV] [relpos] [count] архив [файлы...]
.SH ОПИСАНИЕ
.sp
Команда \fBllvm\-ar\fP похожа на стандартную утилиту Unix,
\fBar\fP\&. Она архивирует несколько файлов, таких как объектные файлы и файлы LLVM bitcode,
в единую архивную библиотеку, которая может быть связана с программой. Однако
архив может содержать файлы любого типа. По умолчанию \fBllvm\-ar\fP
генерирует таблицу символов, что ускоряет компоновку, поскольку нужно проверять
только таблицу символов, а не каждый отдельный файл-член архива.
.sp
Команда \fBllvm\-ar\fP может \fIчитать\fP архивные файлы в форматах SVR4, GNU,
BSD, Big Archive и Darwin, и \fIзаписывать\fP архивные файлы в стиле GNU, BSD, Big Archive и
Darwin. Если архив в формате SVR4 используется с операциями \fI\%r\fP
(замена), \fI\%d\fP (удаление), \fI\%m\fP (перемещение) или \fI\%q\fP
(быстрое обновление), архив будет перестроен в формате,
определённом \fI\%\-\-format\fP\&.
.sp
Вот где \fBllvm\-ar\fP отличается от предыдущих реализаций \fBar\fP:
.sp
\fIСледующая опция не поддерживается\fP
.INDENT 0.0
.INDENT 3.5
[f] \- обрезать имена вставляемых файлов
.UNINDENT
.UNINDENT
.sp
\fIСледующие опции игнорируются для совместимости\fP
.INDENT 0.0
.INDENT 3.5
\-\-plugin=<строка> \- загрузить плагин, добавляющий поддержку других форматов файлов
.sp
[l] \- игнорируется в \fBar\fP
.UNINDENT
.UNINDENT
.sp
\fIТаблица символов\fP
.INDENT 0.0
.INDENT 3.5
Поскольку \fBllvm\-ar\fP поддерживает файлы bitcode, создаваемая им таблица символов
включает как нативные символы, так и символы bitcode.
.UNINDENT
.UNINDENT
.sp
\fIДетерминированные архивы\fP
.INDENT 0.0
.INDENT 3.5
По умолчанию \fBllvm\-ar\fP всегда использует нулевые временные метки и UID/GID
для записи архивов в детерминированном режиме. Это эквивалентно
включённому по умолчанию модификатору \fI\%D\fP. Если необходимо сохранить
совместимость с другими реализациями \fBar\fP, можно передать модификатор
\fI\%U\fP для записи фактических временных меток и UID/GID.
.UNINDENT
.UNINDENT
.sp
\fIПути Windows\fP
.INDENT 0.0
.INDENT 3.5
В Windows \fBllvm\-ar\fP обрабатывает имена архивных \fIфайлов\fP с учётом регистра
так же, как и операционная система. На машинах, отличных от Windows,
\fBllvm\-ar\fP не учитывает регистр символов.
.UNINDENT
.UNINDENT
.SH ПАРАМЕТРЫ
.sp
Операции \fBllvm\-ar\fP совместимы с другими реализациями \fBar\fP\&.
Однако есть несколько модификаторов (\fI\%L\fP), которые не встречаются в других
реализациях \fBar\fP. Параметры для
\fBllvm\-ar\fP указывают одну базовую Операцию для выполнения над архивом,
различные Модификаторы для этой Операции, имя архивного файла и
необязательный список имён файлов. Если параметр \fIфайлы\fP не указан, это
обычно означает либо "ни одного", либо "все" члены архива, в зависимости от операции.
Опции, Операции и Модификаторы объяснены в разделах ниже.
.sp
Минимальный набор опций — это как минимум один оператор и имя
архива.
.SS Операции
.INDENT 0.0
.TP
.B d [NT]
Удалить файлы из \fBархива\fP\&. Модификаторы \fI\%N\fP и \fI\%T\fP
применяются к этой операции. Параметр \fIфайлы\fP указывает, какие члены должны быть
удалены из архива. Не является ошибкой, если указанный файл не
присутствует в архиве. Если \fIфайлы\fP не указаны, архив не
изменяется.
.UNINDENT
.INDENT 0.0
.TP
.B m [abi]
Переместить файлы из одного места в \fBархиве\fP в другое. Модификаторы \fI\%a\fP,
\fI\%b\fP и \fI\%i\fP применяются к этой операции. Указанные \fIфайлы\fP
будут перемещены в место, заданное модификаторами. Если модификаторы не
используются, файлы будут перемещены в конец архива. Если \fIфайлы\fP не
указаны, архив не изменяется.
.UNINDENT
.INDENT 0.0
.TP
.B p [v]
Вывести \fIфайлы\fP в стандартный поток вывода. Если \fIфайлы\fP не указаны,
выводится весь \fBархив\fP. С модификатором \fI\%v\fP
\fBllvm\-ar\fP также выводит имя выводимого файла. Вывод
бинарных файлов не рекомендуется, так как они могут нарушить настройки вашего терминала.
Операция \fI\%p\fP никогда не изменяет архив.
.UNINDENT
.INDENT 0.0
.TP
.B q [LT]
Быстро добавить файлы в конец \fBархива\fP без удаления
дубликатов. Если \fIфайлы\fP не указаны, архив не изменяется.
Поведение при добавлении одного архива к другому зависит от того,
используются ли модификаторы \fI\%L\fP и \fI\%T\fP:
.INDENT 7.0
.IP \(bu 2
Добавление обычного архива к обычному архиву добавит архивный
файл. Если указан модификатор \fI\%L\fP, вместо этого будут добавлены
члены архива.
.IP \(bu 2
Добавление обычного архива к тонкому архиву требует модификатора \fI\%T\fP
и добавит архивный файл. Модификатор \fI\%L\fP не
поддерживается.
.IP \(bu 2
Добавление тонкого архива к обычному архиву добавит архивный файл.
Если указан модификатор \fI\%L\fP, вместо этого будут добавлены
члены архива.
.IP \(bu 2
Добавление тонкого архива к тонкому архиву всегда быстро добавляет его
члены.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B r [abTu]
Заменить существующие \fIфайлы\fP или вставить их в конец \fBархива\fP, если
они не существуют. Модификаторы \fI\%a\fP, \fI\%b\fP, \fI\%T\fP и \fI\%u\fP
применяются к этой операции. Если \fIфайлы\fP не указаны, архив
не изменяется.
.UNINDENT
.sp
t[v]
\&.. option:: t [vO]
.INDENT 0.0
.INDENT 3.5
Вывести оглавление. Без модификаторов эта операция просто печатает
имена членов в стандартный поток вывода. С модификатором \fI\%v\fP
\fBllvm\-ar\fP также выводит тип файла (B=bitcode,
S=таблица символов, пробел=обычный файл), режим доступа, владельца и группу
(игнорируются при извлечении \fIфайлов\fP и устанавливаются в значения-заполнители при добавлении),
размер и дату. С модификатором \fI\%O\fP отображаются смещения членов. Если
указаны какие-либо \fIфайлы\fP, выводятся только они. Если \fIфайлы\fP не
указаны, выводится оглавление всего архива.
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B V
Синоним опции \fI\%\-\-version\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B x [oP]
Извлечь члены \fBархива\fP обратно в файлы. Модификатор \fI\%o\fP применяется
к этой операции. Эта операция извлекает указанные \fIфайлы\fP из архива и записывает их обратно в файловую систему операционной системы. Если
\fIфайлы\fP не указаны, извлекается весь архив.
.UNINDENT
.SS Модификаторы (специфичные для операций)
.sp
Модификаторы ниже специфичны для определённых операций. Смотрите раздел Операции,
чтобы определить, какие модификаторы применимы к каким операциям.
.INDENT 0.0
.TP
.B a
При вставке или перемещении файлов-членов эта опция указывает место назначения
новых файлов как положение после члена \fIrelpos\fP. Если \fIrelpos\fP не найден,
файлы помещаются в конец \fBархива\fP\&. \fIrelpos\fP не может быть
использован без одного из модификаторов \fI\%a\fP, \fI\%b\fP или \fI\%i\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B b
При вставке или перемещении файлов-членов эта опция указывает место назначения
новых файлов как положение перед членом \fIrelpos\fP. Если \fIrelpos\fP не
найден, файлы помещаются в конец \fBархива\fP\&. \fIrelpos\fP не может
быть использован без одного из модификаторов \fI\%a\fP, \fI\%b\fP или \fI\%i\fP\&. Этот
модификатор идентичен модификатору \fI\%i\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B i
Синоним опции \fI\%b\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B L
При быстром добавлении \fBархива\fP вместо этого быстро добавлять его членов. Это
особенность \fBllvm\-ar\fP, которой нет в gnu\-ar.
.UNINDENT
.INDENT 0.0
.TP
.B N
При извлечении или удалении члена, имя которого совпадает с именем другого члена,
параметр \fIcount\fP позволяет указать положительное целое число, которое
выбирает экземпляр данного имени, где "1" означает первый
экземпляр. Если \fI\%N\fP не указан, будет выбран первый член с этим именем.
Если \fIcount\fP не указан, операция завершится неудачно. *count* не может быть
.UNINDENT
.INDENT 0.0
.TP
.B o
При извлечении файлов использовать времена модификации \fIфайлов\fP такими,
какими они представлены в \fBархиве\fP\&. По умолчанию \fIфайлы\fP, извлечённые из архива,
используют время извлечения.
.UNINDENT
.INDENT 0.0
.TP
.B O
Отобразить смещения членов внутри архива.
.UNINDENT
.INDENT 0.0
.TP
.B T
Псевдоним для \fB\-\-thin\fP\&. Во многих реализациях ar \fBT\fP имеет другое
значение, как указано в интерфейсе системы X/Open.
.UNINDENT
.INDENT 0.0
.TP
.B v
При выводе \fIфайлов\fP или оглавления \fBархива\fP этот модификатор
предписывает \fBllvm\-ar\fP включать дополнительную информацию в вывод.
.UNINDENT
.SS Модификаторы (общие)
.sp
Модификаторы ниже могут применяться к любой операции.
.INDENT 0.0
.TP
.B c
Для операций \fI\%r\fP (замена) и \fI\%q\fP (быстрое обновление),
\fBllvm\-ar\fP всегда создаст архив, если его не существует.
Обычно \fBllvm\-ar\fP выводит предупреждение о том, что
\fBархив\fP создаётся. Использование этого модификатора отключает
это предупреждение.
.UNINDENT
.INDENT 0.0
.TP
.B D
Использовать нулевые временные метки и UID/GID. Установлено по умолчанию.
.UNINDENT
.INDENT 0.0
.TP
.B P
Использовать полные пути при сопоставлении имён членов, а не только имя файла.
Это может быть полезно при работе с \fBархивом\fP, созданным другим
архиватором, так как некоторые позволяют использовать пути в качестве имён членов. Это поведение
по умолчанию для тонких архивов.
.UNINDENT
.INDENT 0.0
.TP
.B s
Этот модификатор запрашивает добавление индекса архива (или таблицы символов) в
\fBархив\fP, как при использовании ranlib. Таблица символов будет содержать все
внешне видимые функции и глобальные переменные, определённые всеми файлами
bitcode в архиве. По умолчанию \fBllvm\-ar\fP генерирует таблицы символов в
архивах. Это также может использоваться как операция.
.UNINDENT
.INDENT 0.0
.TP
.B S
Этот модификатор противоположен модификатору \fI\%s\fP\&. Он предписывает
\fBllvm\-ar\fP не строить таблицу символов. Если используются оба модификатора \fI\%s\fP и
\fI\%S\fP, будет действовать последний из встретившихся в параметрах.
.UNINDENT
.INDENT 0.0
.TP
.B u
Обновлять только те члены \fBархива\fP, для которых у \fIфайлов\fP более поздние
временные метки.
.UNINDENT
.INDENT 0.0
.TP
.B U
Использовать фактические временные метки и UID/GID.
.UNINDENT
.SS Прочие
.INDENT 0.0
.TP
.B \-\-format=<тип>
Эта опция позволяет выбрать \fB<тип>\fP по умолчанию: gnu, darwin или bsd.
При создании \fBархива\fP \fB<тип>\fP по умолчанию будет соответствовать типу хостовой машины.
.UNINDENT
.INDENT 0.0
.TP
.B \-h, \-\-help
Вывести краткую справку по параметрам командной строки и их значениям.
.UNINDENT
.INDENT 0.0
.TP
.B \-M
Эта опция позволяет читать сценарии MRI через стандартный поток ввода.
Никакие другие опции несовместимы с этой опцией.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-output=<директория>
Указать директорию, в которую должны извлекаться члены архива. По умолчанию используется
текущая рабочая директория.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rsp\-quoting=<тип>
.TP
.B Эта опция выбирает стиль кавычек \(ga\(ga<тип>\(ga\(ga для файлов ответов, либо
.TP
.B \(ga\(gaposix\(ga\(ga, либо \(ga\(gawindows\(ga\(ga. По умолчанию в Windows используется \(ga\(gawindows\(ga\(ga, в противном случае
.TP
.B по умолчанию используется \(ga\(gaposix\(ga\(ga.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-thin
При создании или изменении архива эта опция указывает, что
\fBархив\fP будет тонким. По умолчанию архивы создаются не как тонкие,
и при изменении тонкого архива он будет преобразован в обычный архив.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
Отобразить версию исполняемого файла \fBllvm\-ar\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-X режим
Определяет тип объектного файла, который будет распознавать \fBllvm\-ar\fP. Режим должен быть
одним из следующих:
.INDENT 7.0
.INDENT 3.5
.INDENT 0.0
.TP
.B 32
Обрабатывать только 32\-битные объектные файлы.
.TP
.B 64
Обрабатывать только 64\-битные объектные файлы.
.TP
.B 32_64
Обрабатывать как 32\-битные, так и 64\-битные объектные файлы.
.TP
.B any
Обрабатывать все объектные файлы.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
По умолчанию обрабатываются 32\-битные объектные файлы (игнорируются 64\-битные объекты). Режим также может
быть установлен с помощью переменной окружения OBJECT_MODE. Например, OBJECT_MODE=64 заставляет ar
обрабатывать любые 64\-битные объекты и игнорировать 32\-битные. Флаг \-X переопределяет переменную OBJECT_MODE.
.UNINDENT
.INDENT 0.0
.TP
.B @<ФАЙЛ>
Читать параметры командной строки и команды из файла ответов \fB<ФАЙЛ>\fP\&.
.UNINDENT
.SH СЦЕНАРИИ MRI
.sp
\fBllvm\-ar\fP понимает подмножество интерфейса сценариев MRI, обычно
поддерживаемого архиваторами, следующими традиции ar. Сценарий MRI содержит
последовательность команд, которые должны быть выполнены архиватором. Опция \fI\%\-M\fP
позволяет передать сценарий MRI в \fBllvm\-ar\fP через
стандартный поток ввода.
.sp
Обратите внимание, что у \fBllvm\-ar\fP есть известные ограничения в использовании сценариев MRI:
.INDENT 0.0
.IP \(bu 2
Каждый сценарий может создать только один архив.
.IP \(bu 2
Существующие архивы не могут быть изменены.
.UNINDENT
.SS Команды сценариев MRI
.sp
Каждая команда начинается с имени команды и должна находиться на отдельной строке.
Некоторые команды имеют аргументы, которые должны быть отделены от имени пробелами.
Сценарий MRI должен начинаться с команды \fI\%CREATE\fP или
\fI\%CREATETHIN\fP и обычно заканчивается командой \fI\%SAVE\fP\&.
Любой текст после либо '*', либо ';' считается комментарием.
.INDENT 0.0
.TP
.B CREATE архив
Начать создание обычного архива с указанным именем. Последующие
команды действуют на этот \fBархив\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B CREATETHIN архив
Начать создание тонкого архива с указанным именем. Последующие
команды действуют на этот \fBархив\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B ADDLIB архив
Добавить содержимое \fBархива\fP к текущему архиву.
.UNINDENT
.INDENT 0.0
.TP
.B ADDMOD <файл>
Добавить \fB<файл>\fP к текущему архиву.
.UNINDENT
.INDENT 0.0
.TP
.B DELETE <файл>
Удалить член текущего архива, имя файла которого (без учёта компонентов директории) совпадает с \fB<файл>\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B SAVE
Записать текущий архив по пути, указанному в предыдущей
команде \fI\%CREATE\fP/\fI\%CREATETHIN\fP\&.
.UNINDENT
.INDENT 0.0
.TP
.B END
Завершает сценарий MRI (необязательно).
.UNINDENT
.SH СТАТУС ВЫХОДА
.sp
Если \fBllvm\-ar\fP завершается успешно, он вернёт 0. В противном случае, при возникновении ошибки, он
вернёт ненулевое значение.
.SH АВТОРЫ
Поддерживается командой LLVM (https://llvm.org/).
.SH АВТОРСКИЕ ПРАВА
2003-2023, Проект LLVM
